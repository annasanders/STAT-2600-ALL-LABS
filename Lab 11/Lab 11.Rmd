---
title: "Lab 11"
author: "Data Me Pls"
date: "April 2, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# The Name Game

# Team stuff (James and Anna will do it this week, next week is Chris and Amanda (good luck on your matrix test))
```{r, eval=FALSE}
install.packages("babynames")
library(tidyverse)
library(babynames)
babynames<- view(babynames)
```

## Ariel and Rachel (DONE)
```{r, eval=FALSE}
babynames<- view(babynames)

fnames<- babynames%>%
  filter(sex=="F")

# Changed the years and name string ("Ra[ey]?ch")
fnamescount<- fnames%>%
  filter(year== 2017)%>%
  summarise(sum(str_detect(name, "Ar[iy]+.l") == T))

fnamestotal<- fnames%>%
  filter(year== 2017)%>%
  summarise(sum(n))
```

__Versions of Ariel and Rachel:__

Year  |Ariel    |Rachel 
------|---------|---------
1973  |3        |14
1988  |9        |22
1990  |10       |19

__Probability of Ariel and Rachel:__

Year  |Ariel     |Rachel 
------|----------|---------
1973  |3/1458168 |14/1458168
1988  |9/1780268 |22/1780268
1990  |10/1898046|19/1898046
2017  |20/1711811|7/1711811

## _The Littel_ Mermaid Effect
```{r, eval=FALSE}
ariel<- fnames%>%
  filter(str_detect(name, "Ar[iy]+.l"))%>%
  group_by(year)%>%
  summarize(sum(n))
  
asnamesp<- babynames%>%
  filter(str_detect(name, "^A"))%>%
  group_by(year)%>%
  summarise(Prop= mean(str_detect(name, "Ar[iy]+.l")))

fnamesp<- fnames%>%
  group_by(name)

ggplot()+
  geom_line(ariel, mapping=aes(x=year, y=`sum(n)`))+
  geom_vline(xintercept= 1989, col="blue")+
  geom_line(anames, mapping=aes(x=year, y=`sum(n)`))
```

__Popularity of Ariel versus other names:__

![](Plots/ariel_vs_pop.png)

For this plot, we decided to look at the four most popular names in the years 1988-1990. These names were Amanda, Ashely, Jessica, and Sarah. From the plot, it's immediately clear that the proportion of those popular names have been decreasing while the proportion of Ariel names have been increasing. 


---

## Group Histogram (TO DO AT THE END)

---

## Chris

## Amanda
```{r, eval=FALSE}

amandaCount <-babynames %>%
  filter(str_detect(name, "Amanda$"), sex== "F")%>%
  group_by(year)%>%
  summarise(sum(n)) %>% rename(count = 'sum(n)')

simNames <- babynames %>% 
  filter(str_detect(name, "^Ama"), sex=='F') %>% 
  group_by(year) %>% 
  summarise(sum(n)) %>% 
  rename(count = 'sum(n)')

ggplot()+
  geom_line(amandaCount, mapping=aes(x= year, y=count, color="Amanda"))+
  geom_line(simNames, mapping=aes(x= year, y= count, color= "Ama"))+
  xlab("Year")+
  ylab("Count of Names")+
  ggtitle("Number of 'Amanda' Names Versus 'Ama' Names")

```

This graph compares the number of people named Amanda each year from 1880-2017 to the number of people who had a name that started with "Ama". From this graph, it's pretty clear that there are not a lot of female names that start with "Ama" besides the name "Amanda". Around the year 2000, the number of names that started with "Ama" other than "Amanda" increased. Other than that, almost all of the names that started with "Ama" were people named Amanda, which can be seen due to the fact that the lines for each name are almost overlapping at most points on the graph.

```{r, eval=FALSE}

amanda <- babynames %>% 
  filter(str_detect(name, "Amanda$"), sex=="F") %>% 
  group_by(year)


ggplot(data=amanda)+
  geom_col(aes(x=year, y=prop), position = "dodge")+
  xlab("Year")+
  ylab("Proportion of Names")+
  geom_vline(xintercept= 1998, col="Red")+
  geom_vline(xintercept= 2017, col="Green")+
  geom_vline(xintercept= 1979, col="Blue")+
  ggtitle("Proportion of Names That Are 'Amanda' Throughout the Years")

```

This graph shows how the proportion of females named Amanda changed over the years, from 1880 to 2017. The number of females named Amanda peaked in 1987 when the proportion of the population named Amanda was 0.02229977.
By the time I was born in 1998, which is depicted by the red line on the graph, the name "Amanda" was on its decline in terms of usage, with a proportion of 0.00563052.
In 2017, the name "Amanda" got even less popular, with the proportion of people with this name being 0.00050883.
Looking 19 years before my birthday in 1979, the popularity of my name was increasing pretty dramatically, with the proportion of the population with that name being 0.01852846.
Describing the overall trend of the graph, the name starts with a proportion of about .0025, then decreases steadily until about 1960, when the proportion of the population named "Amanda" increases dramatically for 30 years. Then it decreases pretty dramatically, and by 2017 the proportion of people named "Amanda" is even less than it was in 1880.

## James

## Anna 
```{r, eval=FALSE}
#Filtering
myname<- babynames%>%
  filter(str_detect(name, "Anna$"), sex== "F")%>%
  group_by(year)%>%
  summarize(sum(n))

myname<- myname%>%
  rename(Count= `sum(n)`, Year= year)

myname2<- babynames%>%
  filter(str_detect(name, "Anna$"), sex== "F")

anames <-babynames%>%
  filter(str_detect(name, "^Ann"), sex== "F")%>%
  group_by(year)%>%
  summarise(sum(n))

anames<- anames%>%
  rename(Count= `sum(n)`, Year= year)

#Proportion & Quantile
anamesp <-babynames%>%
  filter(str_detect(name, "^Ann"), sex== "F")%>%
  group_by(year)%>%
  summarise(Prop= mean(str_detect(name, "Anna$")))

quantile(myname2$prop, c(0.25,0.5,0.75,1))

#ggplot
ggplot()+
  geom_line(myname, mapping=aes(x= Year, y= Count, color="Anna"))+
  geom_line(anames, mapping=aes(x= Year, y= Count, color= "'Ann'"))+
  geom_vline(xintercept= 1999, col="Green")+
  labs(title= "Popularity of Anna and 'Ann' Names", color= "Name")


ggplot(myname2)+
  geom_histogram(mapping=aes(x=prop), bins=14)
```
HSITOGRAM THING

Percentile and Proportion Section:
words words words

OVERALL DISTRIBUTION


# What we did

__Chris:__

__Amanda:__ For my first graph that compares the popularity of my name to other names that start with "Ama", I first created two new datasets from the babynames dataset. I used filter to get only the names that were "Amanda" in one dataset, and that started with "Ama" in the other dataset. I grouped each set by year and used the summarise function to get the total number of people with names that fit these limitations for each year. I also used the rename function to rename the count for total number of people with names like this every year. Then, I used geom_line for each dataset so I could plot two different lines from two different sets onto the same graph, color-coding each line and changing the names of the labels so the graph is easier to understand. For the second graph, which is looking at how the proportion of the population with my name changes over the years, I used filter and group_by again to limit and organize my data. Then I created a histogram that shows the proportion of people with my name for every year from 1880-2017. I used the geom_vline function to creat vertical lines that indicate my birth year, 19 years after my birth year (2017), and 19 years before my birth year (1979). I also changed the labels on my graph to make it easier to understand.

__James:__

__Anna:__ 